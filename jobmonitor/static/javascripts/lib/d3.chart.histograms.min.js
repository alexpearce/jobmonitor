/* d3.chart.histograms 01-02-2016 */
!function(a,b){var c={exponent:function(a){return Math.floor(Math.log(Math.abs(a))/Math.LN10)},ticksExponent:function(a){var c=a,d=b.extent(c),e=b.chart.utilities.exponent(d[0]),f=b.chart.utilities.exponent(d[1]),g=b.max([f,e]);return 3*Math.floor(g/3)},siTickFormatter:function(a,d,e){return function(f){var g=a.ticks(d.ticks()[0]),h=c.ticksExponent(g),i=g.map(function(a){return a/Math.pow(10,h)}),j=b.chart.utilities.exponent(i[0]-i[1]);return j=0>j?Math.abs(j):0,"function"==typeof e&&e(h),(f/Math.pow(10,h)).toFixed(j)}}};b.chart.utilities=c}(window,window.d3),function(a){"use strict";a.chart("BaseChart",{initialize:function(){var a=this;a.margins={top:10,bottom:40,left:60,right:10,padding:10},a._width=a.base.attr("width")?a.base.attr("width")-(a.margins.right+a.margins.left):200,a._height=a.base.attr("height")?a.base.attr("height")-(a.margins.top+a.margins.bottom):200,a.updateContainerWidth(),a.updateContainerHeight(),a.base.append("g").attr("transform","translate("+this.margins.left+","+this.margins.top+")"),a.areas={},a.layers={}},width:function(a){var b=this;if(0===arguments.length)return b._width;var c=b._width;return b._width=a,b.updateContainerWidth(),b.trigger("change:width",a,c),b},height:function(a){var b=this;if(0===arguments.length)return b._height;var c=b._height;return b._height=a,b.updateContainerHeight(),b.trigger("change:height",a,c),b},updateContainerWidth:function(){this.base.attr("width",this._width+this.margins.left+this.margins.right)},updateContainerHeight:function(){this.base.attr("height",this._height+this.margins.top+this.margins.bottom)}})}(window.d3),function(a,b){"use strict";a.chart("BaseChart").extend("AxesChart",{initialize:function(c){var d=this,e="linear",f="log",g="time";c===b&&(c={}),c.xScale===b&&(c.xScale=e),c.yScale===b&&(c.yScale=e),c.zScale===b&&(c.zScale=e),c.xFormatExponent===b&&(c.xFormatExponent=!0),c.yFormatExponent===b&&(c.yFormatExponent=!0),d.config=c,d._xAxisLabel="",d._yAxisLabel="",d._xExponent=0,d._yExponent=0,d._xFormatExponent=c.xFormatExponent,d._yFormatExponent=c.yFormatExponent,d._animate=!0,d.xScale=d.config.xScale===f?a.scale.log():a.scale.linear(),d.config.xScale===g&&(d.xScale=a.time.scale()),d.xScale.range([0,d.width()]).domain([0,1]),d.yScale=d.config.yScale===f?a.scale.log():a.scale.linear(),d.yScale.range([d.height(),0]).domain([0,1]),d.zScale=d.config.zScale===f?a.scale.log():a.scale.linear(),d.zScale.range(["#2c7bb6","#ffffbf","#d7191c"]).interpolate(a.interpolateHcl),d._plotables={},d._ornaments={},d._layers={};var h=d.base.select("g"),i=function(b,c,d){var e=a.svg.axis();return e.ticks(c).scale(b).orient(d).innerTickSize(-e.innerTickSize()).outerTickSize(-e.outerTickSize()).tickPadding(e.tickPadding()+4)};d.areas.xgrid=h.append("g").classed("x grid",!0).attr("transform","translate(0,"+d.height()+")"),d.areas.ygrid=h.append("g").classed("y grid",!0),d.areas.xaxis=h.append("g").classed("x axis",!0).attr("transform","translate(0,"+d.height()+")"),d.areas.xaxistop=h.append("g").classed("x axis",!0),d.areas.yaxis=h.append("g").classed("y axis",!0),d.areas.yaxisright=h.append("g").classed("y axis",!0).attr("transform","translate("+d.width()+", 0)"),d.areas.zscale=d.base.append("g").classed("zscale",!0).attr("transform","translate("+(d.width()+d.margins.left+10)+","+d.margins.top+")"),d.areas.xlabel=d.base.append("g").classed("x axis-label",!0).attr("transform","translate("+(d.width()+d.margins.left)+","+(d.height()+d.margins.top+d.margins.bottom)+")"),d.areas.xlabel.append("text").attr("text-anchor","end").attr("dy","-0.2em"),d.areas.ylabel=d.base.append("g").classed("y axis-label",!0).attr("transform","rotate(-90) translate("+-d.margins.top+")"),d.areas.ylabel.append("text").attr("text-anchor","end").attr("dy","1em");var j=5,k=5;d.layers.xaxis=i(d.xScale,j,"bottom"),d.layers.xaxistop=i(d.xScale,j,"top").tickFormat(""),d.layers.xgrid=i(d.xScale,j,"bottom").tickSize(-d.height(),0,0).tickFormat(""),d.layers.yaxis=i(d.yScale,k,"left"),d.layers.yaxisright=i(d.yScale,k,"right").tickFormat(""),d.layers.ygrid=i(d.yScale,k,"left").tickSize(-d.width(),0,0).tickFormat("");var l=a.chart.utilities.siTickFormatter(d.xScale,d.layers.xaxis,function(a){d._xExponent=a,d.xAxisLabel(d.xAxisLabel())}),m=a.chart.utilities.siTickFormatter(d.yScale,d.layers.yaxis,function(a){d._yExponent=a,d.yAxisLabel(d.yAxisLabel())});d.config.xScale===e&&d.xFormatExponent&&d.layers.xaxis.tickFormat(l),d.config.yScale===e&&d.yFormatExponent&&d.layers.yaxis.tickFormat(m),d.clipPath=d.base.append("defs").append("clipPath").attr("id","chartArea-"+Math.random().toString(36).substring(7));var n=d.clipPath.append("rect").attr("width",d.width()).attr("height",d.height()),o=function(a,b){d.xScale.domain(a),d.yScale.domain(b),d.draw()},p=100,q=40,r=10,s=a.svg.brush(),t=function(){if(s.empty()!==!0){var a=d.base.select(".clear-button");if(a.empty()===!0){d.xScale.originalDomain=d.xScale.domain(),d.yScale.originalDomain=d.yScale.domain();var b=d.base.append("g").classed("clear-button",!0).attr("transform","translate("+(d.width()+d.margins.left-p-r)+","+(d.margins.top+r)+")");b.append("rect").attr("width",p).attr("height",q).attr("rx",2).attr("ry",2),b.append("text").attr("x",10).attr("y",25).text("Clear zoom"),b.on("click",function(){d.base.select(".brush").call(s.clear()),o(d.xScale.originalDomain,d.yScale.originalDomain),b.remove()})}var c=s.extent(),e=[c[0][0],c[1][0]],f=[c[0][1],c[1][1]];o(e,f),d.base.select(".brush").call(s.clear())}};s.x(d.xScale).y(d.yScale).on("brushend",t),d.areas.brush=d.base.append("g").classed("brush",!0).attr("transform","translate("+d.margins.left+", "+d.margins.top+")"),d.areas.brush.call(s),d.on("change:width",function(a){d.xScale.range([0,a]),d.areas.xlabel.attr("transform","translate("+(a+d.margins.left)+","+(d.height()+d.margins.top+d.margins.bottom)+")"),d.areas.yaxisright.attr("transform","translate("+a+", 0)"),d.layers.ygrid.tickSize(-a,0,0),n.attr("width",a),d.areas.zscale.attr("transform","translate("+(a+d.margins.left+10)+","+d.margins.top+")"),d.draw(!1)}),d.on("change:height",function(a){d.yScale.range([a,0]),d.areas.xaxis.attr("transform","translate(0,"+a+")"),d.areas.xgrid.attr("transform","translate(0,"+a+")"),d.areas.xlabel.attr("transform","translate("+(d.width()+d.margins.left)+","+(a+d.margins.top+d.margins.bottom)+")"),d.layers.xgrid.tickSize(-a,0,0),n.attr("height",a),d.areas.brush.call(s),d.draw(!1)}),d.draw(!1)},draw:function(a){var c=this;a===b&&(a=c.animate());var d,e;for(d in c._plotables){if(e=c._plotables[d],e.zDomain!==b){if(c._hasZScale!==!0)return c._hasZScale=!0,c.margins.right+=70,c.width(c.width()-70),c;c.drawColorScale()}e.draw(c,c._layers[d],a)}return a===!0?(c.areas.xaxis.transition().duration(250).call(c.layers.xaxis),c.areas.xaxistop.transition().duration(250).call(c.layers.xaxistop),c.areas.xgrid.transition().duration(250).call(c.layers.xgrid),c.areas.yaxis.transition().duration(250).call(c.layers.yaxis),c.areas.yaxisright.transition().duration(250).call(c.layers.yaxisright),c.areas.ygrid.transition().duration(250).call(c.layers.ygrid)):(c.areas.xaxis.call(c.layers.xaxis),c.areas.xaxistop.call(c.layers.xaxistop),c.areas.xgrid.call(c.layers.xgrid),c.areas.yaxis.call(c.layers.yaxis),c.areas.yaxisright.call(c.layers.yaxisright),c.areas.ygrid.call(c.layers.ygrid)),c},xAxisLabel:function(a){var b=this;return 0===arguments.length?b._xAxisLabel:(b._xAxisLabel=a,b.areas.xlabel.select("text").text(0!==b._xExponent?b.xAxisLabel()+" ×1e"+b._xExponent:b.xAxisLabel()),b)},yAxisLabel:function(a){var b=this;return 0===arguments.length?b._yAxisLabel:(b._yAxisLabel=a,b.areas.ylabel.select("text").text(0!==b._yExponent?b.yAxisLabel()+" ×1e"+b._yExponent:b.yAxisLabel()),b)},animate:function(a){var b=this;return 0===arguments.length?b._animate:(b._animate=a,b)},plotables:function(){return this._plotables},addPlotable:function(a){var c=this,d=["draw","name","xDomain","yDomain"],e=d.every(function(c){return a[c]!==b});if(e)return c._plotables[a.name]=a,c._layers[a.name]=c.base.select("g").insert("g",".axis").classed(a.name,!0).attr("clip-path","url(#"+c.clipPath.attr("id")+")"),c.setDomain(),c.draw(!1),c},removePlotable:function(a){var b=this;return b._layers[a].remove(),delete b._plotables[a],delete b._layers[a],b.setDomain(),b.draw(!1),b},ornaments:function(){return this._ornaments},addOrnament:function(a){var c=this,d=["draw","name"],e=d.every(function(c){return a[c]!==b});if(e)return c._ornaments[a.name]=a,c._layers[a.name]=c.base.append("g").classed(a.name,!0),a.draw(c,c._layers[a.name]),c},removeOrnament:function(a){var b=this;return b._layers[a].remove(),delete b._ornaments[a],delete b._layers[a],b},setDomain:function(){var c,d,e=[],f=[],g=[],h=this;for(c in h._plotables)d=h._plotables[c],e=a.extent(d.xDomain().concat(e)),f=a.extent(d.yDomain().concat(f)),d.zDomain!==b&&(g=a.extent(d.zDomain().concat(g)));e=0===e.length?[0,1]:e,f=0===f.length?[0,1]:f,g=0===g.length?[0,1]:g,h.xScale.domain(e),h.yScale.domain(f),h.zScale.domain([g[0],(g[1]-g[0])/2,g[1]])},drawColorScale:function(){var a=this,b=a.zScale.ticks(20).reverse(),c=(Math.abs(b[0]-b[1]),25),d=a.height()/b.length,e=a.areas.zscale.selectAll(".zscale-item").data(b).enter().append("g").attr("class","zscale-item").attr("transform",function(a,b){return"translate(0, "+b*d+")"});e.append("rect").attr("width",c).attr("height",d).style("fill",a.zScale),e.append("text").attr("x",c+5).attr("y",d/2).attr("dy",".35em").text(String),a.areas.zscale.append("rect").attr("width",c).attr("height",d*b.length).classed("zscale-box",!0).style("fill","none")}})}(window.d3),function(a,b){"use strict";var c=function(c,d,e){return e===b&&(e={}),e.color===b&&(e.color="#000000"),e.x===b&&(e.x=70),e.y===b&&(e.y=20),{name:c,data:d,xDomain:function(){return[]},yDomain:function(){return[]},draw:function(c,d,f){if(0===arguments.length)return void console.error("Cannot draw "+this.name+", no arguments given");f===b&&(f=!1),d.classed("TextBox",!0);var g=150,h=20*this.data.length+10;d.selectAll("rect").data([null]).enter().append("rect").attr("x",0).attr("y",0).attr("width",g).attr("height",h).style("fill","#ffffff").style("stroke","#000000").style("stroke-width","1px");var i=d.selectAll("g").data(this.data);i.enter().append("g").classed("legend-item",!0).attr("transform",function(a,b){return"translate(0,"+(20+20*b)+")"}),i.selectAll("text").data(function(a){return a}).enter().append("text").attr("x",function(a,b){return[5,g-5][b]}).attr("text-anchor",function(a,b){return["start","end"][b]}).style("fill",e.color).text(function(a){return a});var j=d.data()[0]===b?[{x:e.x,y:e.y}]:d.data();d.data(j),d.attr("transform","translate("+j[0].x+","+j[0].y+")");var k=a.behavior.drag().origin(function(a){return a}).on("drag",function(b){a.select(this).attr("transform","translate("+(b.x=a.event.x)+","+(b.y=a.event.y)+")")});d.call(k)}}};a.plotable=a.plotable||{},a.plotable.TextBox=c}(window.d3),function(a,b){"use strict";var c=function(c,d,e){e===b&&(e={}),e.color===b&&(e.color="#261196"),e.yMinimum===b&&(e.yMinimum=0),e.showUncertainties===b&&(e.showUncertainties=!1);for(var f=0;f<d.length;f++){var g=d[f];g.y=g.y>e.yMinimum?g.y:e.yMinimum,"yerr"in g||(g.yerr=[0,0]),d[f]=g}return{name:c,data:d,color:e.color,yMinimum:e.yMinimum,showUncertainties:e.showUncertainties,xDomain:function(){var b=a.extent(this.data,function(a){return a.xlow}),c=a.extent(this.data,function(a){return a.xhigh}),d=.05*Math.abs(b[0]-c[1]);return[b[0]-d,c[1]+d]},yDomain:function(){var b=a.extent(this.data,function(a){return a.y+a.yerr[1]}),c=Math.min(this.yMinimum,b[0]);return[c,1.05*b[1]]},draw:function(c,e,f){if(0===arguments.length)return void console.error("Cannot draw "+this.name+", no arguments given");f===b&&(f=!1),e.classed("Histogram",!0);var g=d[0].xlow,h=[{xlow:g,xhigh:g,y:this.yDomain()[0],yerr:[0,0]}],i=h.concat(this.data),j=a.svg.area().interpolate("step-before").x(function(a){return c.xScale(a.xhigh)}).y1(function(a){return c.yScale(a.y)}).y0(c.yScale(this.yMinimum)),k=e.selectAll("path.line").data([i]),l=f===!0?k.transition().duration(250):k;k.enter().append("path").classed("line",!0).attr("fill","none").attr("stroke",this.color),l.attr("d",j);var m=e.selectAll("path.uncertainty").data(this.data),n=f===!0?m.transition().duration(250):m;m.enter().append("path").classed("uncertainty",!0).attr("fill","none").attr("stroke",this.color),this.showUncertainties===!0&&n.attr("d",function(a){var b=c.xScale(a.xhigh-(a.xhigh-a.xlow)/2),d=(c.xScale(a.xhigh)-c.xScale(a.xlow))/10,e=b-d,f=b+d,g=c.yScale(a.y-a.yerr[0]),h=c.yScale(a.y+a.yerr[1]);return"M"+e+" "+g+"H"+f+"M"+e+" "+h+"H"+f+"M"+b+" "+h+"V"+g})}}};a.plotable=a.plotable||{},a.plotable.Histogram=c}(window.d3),function(a,b){"use strict";var c=function(c,d,e){return e===b&&(e={}),{name:c,data:d,xDomain:function(){var b=a.extent(this.data,function(a){return a.xlow}),c=a.extent(this.data,function(a){return a.xhigh});return[b[0],c[1]]},yDomain:function(){var b=a.extent(this.data,function(a){return a.ylow}),c=a.extent(this.data,function(a){return a.yhigh});return[b[0],c[1]]},zDomain:function(){var b=this.data.filter(function(a){return a.z>0}),c=a.extent(b,function(a){return a.z});return[c[0],(c[1]-c[0])/2,c[1]]},draw:function(a,c,e){if(0===arguments.length)return void console.log("Cannot draw "+this.name+", no arguments given");e===b&&(e=!1),c.classed("Histogram2D",!0);var f=c.selectAll("rect").data(d),g=e===!0?f.transition().duration(250):f;f.enter().append("rect").classed("tile",!0),g.attr("x",function(b){return a.xScale(b.xlow)}).attr("y",function(b){return a.yScale(b.yhigh)}).attr("width",function(b){return a.xScale(b.xhigh)-a.xScale(b.xlow)}).attr("height",function(b){return a.yScale(b.ylow)-a.yScale(b.yhigh)}).style("fill",function(b){return b.z>0?a.zScale(b.z):"none"})}}};a.plotable=a.plotable||{},a.plotable.Histogram2D=c}(window.d3),function(a,b){"use strict";var c=function(c,d,e){e===b&&(e={}),e.color===b&&(e.color="#261196"),e.interpolation===b&&(e.interpolation="basis"),e.showPoints===b&&(e.showPoints=!1),e.showUncertainties===b&&(e.showUncertainties=!1);for(var f=0;f<d.length;f++){var g=d[f];"xerr"in g||(g.xerr=[0,0]),"yerr"in g||(g.yerr=[0,0]),d[f]=g}return{name:c,data:d,color:e.color,interpolation:e.interpolation,showPoints:e.showPoints,showUncertainties:e.showUncertainties,xDomain:function(){var b=a.extent(this.data,function(a){return a.x+a.xerr[1]}),c=a.extent(this.data,function(a){return a.x-a.xerr[0]}),d=[c[0],b[1]],e=.05*Math.abs(d[0]-d[1]);return[d[0]-e,d[1]+e]},yDomain:function(){var b=a.extent(this.data,function(a){return a.y+a.yerr[1]}),c=a.extent(this.data,function(a){return a.y-a.yerr[0]}),d=[c[0],b[1]],e=.05*Math.abs(d[0]-d[1]);return[d[0]-e,d[1]+e]},draw:function(c,d,e){if(0===arguments.length)return void console.error("Cannot draw "+this.name+", no arguments given");e===b&&(e=!1),d.classed("LineChart",!0);var f=a.svg.line().interpolate(this.interpolation).x(function(a){return c.xScale(a.x)}).y(function(a){return c.yScale(a.y)}),g=d.selectAll("path.line").data([this.data]),h=e===!0?g.transition().duration(250):g;g.enter().append("path").classed("line",!0).attr("fill","none").attr("stroke",this.color),h.attr("d",f);var i=d.selectAll("circle.point").data(this.data),j=e===!0?i.transition().duration(250):i;i.enter().append("circle").classed("point",!0).attr("fill",this.color),this.showPoints===!0&&j.attr("cx",function(a){return c.xScale(a.x)}).attr("cy",function(a){return c.yScale(a.y)}).attr("r",2);var k=d.selectAll("path.uncertainty").data(this.data),l=e===!0?k.transition().duration(250):k;k.enter().append("path").classed("uncertainty",!0).attr("fill","none").attr("stroke",this.color),this.showUncertainties===!0&&l.attr("d",function(a){var b=c.xScale(a.x),d=c.xScale(a.x-a.xerr[0]),e=c.xScale(a.x+a.xerr[1]),f=c.yScale(a.y),g=c.yScale(a.y-a.yerr[0]),h=c.yScale(a.y+a.yerr[1]),i=4,j="M"+(b-i)+" "+g+"H"+(b+i)+"M"+b+" "+g+"V"+h+"M"+(b-i)+" "+h+"H"+(b+i),k="M"+d+" "+(f-i)+"V"+(f+i)+"M"+d+" "+f+"H"+e+"M"+e+" "+(f+i)+"V"+(f-i);return j+k})}}};a.plotable=a.plotable||{},a.plotable.LineChart=c}(window.d3);